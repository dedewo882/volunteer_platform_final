{% extends 'volunteer/base.html' %}
{% block content %}

<div class="position-relative p-5 mb-5 text-center rounded-5 shadow-sm" 
     style="background: linear-gradient(180deg, #e3f2fd 0%, #ffffff 100%); border: 1px solid #eef2f3;">
     
    <div class="py-4 position-relative z-2">
      <h1 class="display-5 fw-bold mb-3" style="color: #2d3436; letter-spacing: -1px;">ğŸ‘‹ æ¬¢è¿å›æ¥ï¼Œå¿—æ„¿è€…ï¼</h1>
      <p class="lead mb-5 text-secondary">åœ¨è¿™é‡Œå¯»æ‰¾ä½ éœ€è¦å¸®åŠ©çš„é¡¹ç›®ï¼Œç‚¹äº®é’æ˜¥ï¼Œæ¸©æš–ä»–äººã€‚</p>
      
      <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <form method="get" action="{% url 'activity_list' %}">
                <div class="d-flex align-items-center bg-white rounded-pill p-1 shadow-lg border" style="border-color: rgba(0,0,0,0.05) !important;">
                    <i class="bi bi-search text-muted ms-3 fs-5"></i>
                    <input type="search" class="form-control border-0 shadow-none bg-transparent ps-3" 
                           placeholder="æœç´¢å¿—æ„¿æ´»åŠ¨..." name="q" value="{{ search_query }}" style="height: 50px; font-size: 1.05rem;">
                    <button class="btn btn-danger rounded-pill px-4 py-2 m-1 fw-bold" type="submit" 
                            style="background-color: var(--nav-red); border:none; box-shadow: 0 4px 10px rgba(214, 48, 49, 0.3);">
                        æœ ç´¢
                    </button>
                </div>
            </form>
        </div>
      </div>
    </div>
</div>

{% if announcements %}
<div class="row mb-5">
    <div class="col-12">
        <div class="d-flex align-items-center mb-3 ps-2">
            <div class="bg-danger bg-opacity-10 text-danger rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 32px; height: 32px;">
                <i class="bi bi-megaphone-fill small"></i>
            </div>
            <h5 class="mb-0 fw-bold text-dark">æœ€æ–°å…¬å‘Š</h5>
        </div>
        <div class="list-group border-0 shadow-sm rounded-4 overflow-hidden">
            {% for announcement in announcements %}
            <div class="list-group-item border-0 border-bottom p-4 list-group-item-action">
                <div class="d-flex w-100 justify-content-between align-items-center mb-1">
                    <h6 class="mb-0 text-dark fw-bold">{{ announcement.title }}</h6>
                    <span class="badge bg-light text-secondary fw-normal border">{{ announcement.created_at|date:"m-d" }}</span>
                </div>
                <p class="mb-0 text-secondary small opacity-75">{{ announcement.content|truncatechars:80 }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<div class="d-flex justify-content-between align-items-center mb-4 ps-2">
    <div class="d-flex align-items-center">
        <div class="bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 32px; height: 32px;">
            <i class="bi bi-grid-fill small"></i>
        </div>
        <h5 class="mb-0 fw-bold text-dark">æ­£åœ¨æ‹›å‹Ÿ</h5>
    </div>
</div>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
  {% for activity in activities %}
    <div class="col">
      <div class="card h-100 border-0">
        <div class="card-body d-flex flex-column p-4">
            <div class="d-flex justify-content-between align-items-start mb-3">
                <span class="badge bg-success bg-opacity-10 text-success border border-success border-opacity-25 rounded-pill px-3">æŠ¥åä¸­</span>
                <div class="text-end">
                    <h4 class="mb-0 fw-bold text-dark">{{ activity.hours_reward }}</h4>
                    <small class="text-muted" style="font-size: 0.7rem;">å·¥æ—¶å¥–åŠ±</small>
                </div>
            </div>
            
            <h5 class="card-title fw-bold text-dark mb-3">{{ activity.title }}</h5>
            
            <div class="card-text text-secondary small mb-4 flex-grow-1">
                <div class="d-flex align-items-center mb-2">
                    <i class="bi bi-lightning-charge-fill text-warning me-2"></i>
                    <span>ç»éªŒ: {{ activity.min_xp }}+</span>
                </div>
                <div class="d-flex align-items-center">
                    <i class="bi bi-person-check-fill text-primary me-2"></i>
                    <span>å·²æŠ¥: {{ activity.approved_registrations_count }} / {{ activity.capacity|default:"âˆ" }}</span>
                </div>
            </div>
            
            <a href="{% url 'activity_detail' activity.id %}" class="btn btn-outline-dark w-100 mt-auto rounded-pill fw-bold border-2 hover-shadow">
                æŸ¥çœ‹è¯¦æƒ…
            </a>
        </div>
      </div>
    </div>
  {% endfor %}
</div>
{% endblock %}